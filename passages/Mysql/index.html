<!DOCTYPE html>
<html>
  
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta name="author" content="xxx">
  
  
  <title>Mysql | Hexo</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Mysql,数据库,">
  

  
  <meta name="description" content="xxx">

  

  
    <script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.11.1/dist/av-min.js" async></script>
  

  
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
  

  
    <script src="//unpkg.com/valine/dist/Valine.min.js" async></script>
  

  

  <script>
  // theme-ad's config script
  // it can be used in every script
  
  window.AD_CONFIG = {
    leancloud: {"appid":"MDoK06tUeJNe9gUQnRye15hO-gzGzoHsz","appkey":"c0Irl5sjfr5NqD3wIbJrMCDA","comment":true,"count":true},
    welcome: {"enable":false,"interval":30},
    start_time: "2019-10-16",
    passwords: ["efe07af7441da2b69c4a41e42e73be4db47f66010a56900788a458354a7373ec", ],
    is_post: true,
    lock: false,
    author: "xxx",
    share: {"twitter":true,"facebook":true,"weibo":true,"qq":true,"wechat":true},
    mathjax: true,
    page_type: "",
    root: "/blog/"
  };
</script>

  <script src="/blog/vendor/sha256.min.js"></script>
<script src="/blog/js/auth.js"></script>
<script src="/blog/js/index.js"></script>
<script src="/blog/vendor/qrcode.min.js"></script>

  
    <link rel="icon" href="/blog/images/favicon.ico">
    <link rel="apple-touch-icon" href="/blog/images/touch-icon.png">
  

  <link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" href="/blog/css/index.css">
<link rel="stylesheet" href="/blog/styles/components/highlight/highlight.css">

  
</head>
  <body>
    <header class="site-header">
  <div class="site-header-brand">
    
      <span class="site-header-brand-title">
        <a href="/blog/">xxx</a>
      </span>
    
    
      <span class="site-header-brand-motto"> | 不要忘记，你依然是个菜鸡！</span>
    
  </div>
  <div class="site-header-right">
    <nav class="site-header-navigation">
      
        <a href="/blog/" target="_self">首页</a>
      
        <a href="/blog/archives/" target="_self">归档</a>
      
        <a href="/blog/tags/" target="_self">标签</a>
      
        <a href="/blog/categories/" target="_self">分类</a>
      
        <a href="/blog/friends/" target="_self">友链</a>
      
        <a href="/blog/about/" target="_self">关于</a>
      
    </nav>
    <div class="site-header-btn">
      
        <a href="https://github.com/hahahashiqi/" target="_blank" id="site-github">
          <i class="fa fa-github-alt"></i>
        </a>
      
      <a href="javascript:void(0);" id="site-search">
        <i class="fa fa-search"></i>
      </a>
      <a href="javascript:void(0);" id="site-nav-btn">
        <i class="fa fa-ellipsis-v"></i>
      </a>
    </div>
  </div>
</header>
<nav class="table-content" id="site-nav">
  <div class="table-content-title">
    <span>导航</span>
  </div>
  <div class="table-content-main">
    <ol class="toc">
      
        <li class="toc-item">
          <a href="/blog/" target="_self">
            首页
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/blog/archives/" target="_self">
            归档
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/blog/tags/" target="_self">
            标签
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/blog/categories/" target="_self">
            分类
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/blog/friends/" target="_self">
            友链
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/blog/about/" target="_self">
            关于
          </a>
        </li>
      
    </ol>
  </div>
</nav>
<div id="site-process"></div>
    <main>
      
  <div class="passage">
  <div class="passage-meta">
    <span>
      <i class="fa fa-calendar"></i>2019-11-03
    </span>
    
    
      <span>
        | <i class="fa fa-unlock-alt"></i>UNLOCK
      </span>
    
  </div>
  <h1 class="passage-title">
    Mysql
  </h1>
  
    <div class="passage-cover">
      <figure style="background-image:url(https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=4085049135,313268802&fm=26&gp=0.jpg);"></figure>
    </div>
  
  <article class="passage-article">
    <h1 id="存储引擎：Innodb-myisam-memory-blackhole"><a href="#存储引擎：Innodb-myisam-memory-blackhole" class="headerlink" title="存储引擎：Innodb myisam,memory,blackhole"></a>存储引擎：Innodb myisam,memory,blackhole</h1><p>MySQL中的数据用各种不同的技术存储在文件（或者内存）中。这些技术中的每一种技术都使用不同的存储机制、索引技巧、锁定水平并且最终提供不同的功能和能力。<br>通过选择不同的技术，你能够获得额外的速度或者功能，从而改善你的应用的整体功能。</p>
<p><strong>MyISAM</strong>：拥有较高的插入，查询速度，但不支持事务，不支持外键。<br><strong>InnoDB</strong>：支持事务，支持外键，支持行级锁定，性能较低。<br><strong>blackhole</strong>:创建立马删除<br><strong>memory</strong>：只存在于内存中</p>
<h1 id="创建表的完整性约束"><a href="#创建表的完整性约束" class="headerlink" title="创建表的完整性约束"></a>创建表的完整性约束</h1><p>create  table 表名(<br>    字段名1 类型[(宽度) 约束条件],<br>    字段名2 类型[(宽度) 约束条件],<br>    字段名3 类型[(宽度) 约束条件]<br>);</p>
<p>注意：字段名和字段类型是必须的，最后一个字段不能加逗号</p>
<p>宽度：char只能存一个字符</p>
<p>alter table 表名 modify 字段名 字段类型 约束条件<br>//自增条件<br>auto_increment</p>
<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;数值类型&gt;</span><br><span class="line">smallint  2字节</span><br><span class="line">int       4字节</span><br><span class="line">bigint    8字节   </span><br><span class="line"></span><br><span class="line"><span class="built_in">float</span>     4字节</span><br><span class="line">double    8字节</span><br><span class="line"></span><br><span class="line">&lt;日期和时间类型&gt;</span><br><span class="line">date      3字节</span><br><span class="line">time      3字节</span><br><span class="line">year      1字节</span><br><span class="line">datetime  8字节</span><br><span class="line">timestamp 4字节</span><br><span class="line"></span><br><span class="line">&lt;字符串类型&gt;</span><br><span class="line">char    0-255</span><br><span class="line">varchar 0-65535</span><br><span class="line">text    0-65535</span><br></pre></td></tr></table></figure>

<h1 id="查询版本"><a href="#查询版本" class="headerlink" title="查询版本"></a>查询版本</h1><p>select version();</p>
<h1 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h1><p>select 100<em>23 as 别名；<br>select 100</em>23 别名;</p>
<h1 id="distinct-去重"><a href="#distinct-去重" class="headerlink" title="distinct 去重"></a>distinct 去重</h1><p>select distinct 字段名 from 表名；</p>
<h1 id="unsigned"><a href="#unsigned" class="headerlink" title="unsigned"></a>unsigned</h1><h1 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h1><p>select ‘qwe’+123; 结果是123 不能拼接字符串<br>select null+123; 结果是null 任何值和NULL都是null<br>select concat(字段名。字段名) as 别名 from 表名；</p>
<h1 id="ifnull-字段名-返回值"><a href="#ifnull-字段名-返回值" class="headerlink" title="ifnull(字段名,返回值)"></a>ifnull(字段名,返回值)</h1><p>当使用拼接语句时，因为存在可能有的属性为空的情况下<br>select concat(ifnull(saddress,0),sname) as out_put from student;</p>
<h1 id="模糊查询Like-只是通配符-不能正则"><a href="#模糊查询Like-只是通配符-不能正则" class="headerlink" title="模糊查询Like 只是通配符 不能正则"></a>模糊查询Like 只是通配符 不能正则</h1><p>通配符：%匹配任意字符 <em>匹配单个字符<br>查询第名字第二位为a和第四位为s的人的名字<br>select * from student where sname like ‘<em>a</em>s’;<br>escape//转义<br>select * from student where sname like ‘</em>$_’ escape ‘$’; //通过指定转义字符</p>
<h1 id="正则表达式-rlike-可以是正则表达式-需要"><a href="#正则表达式-rlike-可以是正则表达式-需要" class="headerlink" title="正则表达式 rlike 可以是正则表达式 需要"></a>正则表达式 rlike 可以是正则表达式 需要</h1><p>查找name字段中以’st’为开头的所有数据：<br>mysql&gt; SELECT name FROM person_tbl WHERE name REGEXP ‘^st’;</p>
<p>查找name字段中以’ok’为结尾的所有数据：<br>mysql&gt; SELECT name FROM person_tbl WHERE name REGEXP ‘ok$’;</p>
<p>查找name字段中包含’mar’字符串的所有数据：<br>mysql&gt; SELECT name FROM person_tbl WHERE name REGEXP ‘mar’;</p>
<p>查找name字段中以元音字符开头或以’ok’字符串结尾的所有数据：<br>mysql&gt; SELECT name FROM person_tbl WHERE name REGEXP ‘^[aeiou]|ok$’;</p>
<h1 id="between-and-包含临界值"><a href="#between-and-包含临界值" class="headerlink" title="between and 包含临界值"></a>between and 包含临界值</h1><p>select * from student where sno between 100 and 120;</p>
<h1 id="in"><a href="#in" class="headerlink" title="in"></a>in</h1><p>select <em>sname</em> form student where  sname in(‘zs’,’ls’);</p>
<h1 id="is-null-is-not-null"><a href="#is-null-is-not-null" class="headerlink" title="is null / is not null"></a>is null / is not null</h1><p>select * from student where monmery is null;<br>select * from student where monmery is not null;</p>
<h1 id="lt-gt-安全等于"><a href="#lt-gt-安全等于" class="headerlink" title="&lt;=&gt; 安全等于"></a>&lt;=&gt; 安全等于</h1><p>select * from student where sname &lt;=&gt; ‘qwe’;</p>
<h1 id="lt-gt-不等于"><a href="#lt-gt-不等于" class="headerlink" title="&lt;&gt;  != 不等于"></a>&lt;&gt;  != 不等于</h1><p>select * from stdetn where sage &lt;&gt; 21;</p>
<h1 id="order-by-默认是升序"><a href="#order-by-默认是升序" class="headerlink" title="order by 默认是升序"></a>order by 默认是升序</h1><p>select * from student order by sage desc;//desc是从高到低<br>select * from student order by sage asc;//从低到高<br>//order by 子句冲可以放单个字段、多个字段、表达式、函数、别名、</p>
<h1 id="按年薪的高低显示员工的信息和年薪-按别名排序"><a href="#按年薪的高低显示员工的信息和年薪-按别名排序" class="headerlink" title="按年薪的高低显示员工的信息和年薪(按别名排序)"></a>按年薪的高低显示员工的信息和年薪(按别名排序)</h1><p>select <em>,salary*12</em>(1+ifnull(commission_pct,0)) 年薪 from employees order by 年薪 desc;<br>//判断如果没有奖金率</p>
<h1 id="常见函数"><a href="#常见函数" class="headerlink" title="常见函数"></a>常见函数</h1><p>//调高代码的重用性，隐藏了实现细节<br>函数的调用：select 函数名(参数列表) [from表]：</p>
<h5 id="1-字符函数length-获取参数值的字节个数"><a href="#1-字符函数length-获取参数值的字节个数" class="headerlink" title="1.字符函数length //获取参数值的字节个数"></a>1.字符函数length //获取参数值的字节个数</h5><p>select length(‘张三’);</p>
<h5 id="2-concat拼接函数"><a href="#2-concat拼接函数" class="headerlink" title="2.concat拼接函数"></a>2.concat拼接函数</h5><p>select concat(last_name,’_’,first_name) 姓名 from student;</p>
<h5 id="3-upper-、lower"><a href="#3-upper-、lower" class="headerlink" title="3.upper 、lower"></a>3.upper 、lower</h5><p>select concat(supper(last_name),lower(first_name)) 姓名 from student；</p>
<h5 id="4-substr、substring-截取字符串"><a href="#4-substr、substring-截取字符串" class="headerlink" title="4.substr、substring//截取字符串"></a>4.substr、substring//截取字符串</h5><p>select substr(‘大撒大撒大撒法’，4) out_put;//mysql的索引是从1开始的<br>select concat(upper(substr(last_name,1,1)),’_’,lower(substr(first_name,2))) out_put;</p>
<h5 id="5-instr返回字串第一次出现的索引"><a href="#5-instr返回字串第一次出现的索引" class="headerlink" title="5.instr返回字串第一次出现的索引"></a>5.instr返回字串第一次出现的索引</h5><p>select instr(‘qweqwe’,’qwe’) as out_put;</p>
<h5 id="6-trim"><a href="#6-trim" class="headerlink" title="6.trim"></a>6.trim</h5><p>select length(trim(‘张翠山’)) as out_put;</p>
<h5 id="7-lpad-用指定的字符实现左填充指定长度"><a href="#7-lpad-用指定的字符实现左填充指定长度" class="headerlink" title="7.lpad 用指定的字符实现左填充指定长度"></a>7.lpad 用指定的字符实现左填充指定长度</h5><p>select lpad(‘殷素素’,10,’*’) as out_put;</p>
<h5 id="8-rpad-用指定的字符实现左填充指定长度"><a href="#8-rpad-用指定的字符实现左填充指定长度" class="headerlink" title="8.rpad 用指定的字符实现左填充指定长度"></a>8.rpad 用指定的字符实现左填充指定长度</h5><p>select rpad(‘殷素素’,10,’*’) as out_put;</p>
<h5 id="9-replace-替换"><a href="#9-replace-替换" class="headerlink" title="9.replace 替换"></a>9.replace 替换</h5><p>select replace(‘我爱你’,’我’,’你’) as out_put;</p>
<h2 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h2><h5 id="round四舍五入"><a href="#round四舍五入" class="headerlink" title="round四舍五入"></a>round四舍五入</h5><p>select round(1.55);</p>
<h4 id="ceil向上取整"><a href="#ceil向上取整" class="headerlink" title="ceil向上取整"></a>ceil向上取整</h4><p>select ceil(1.00)</p>
<h4 id="floor向下取整"><a href="#floor向下取整" class="headerlink" title="floor向下取整"></a>floor向下取整</h4><p>select floot(-9.99);</p>
<h4 id="truncate-截断"><a href="#truncate-截断" class="headerlink" title="truncate 截断"></a>truncate 截断</h4><p>select truncate(2.54984,1);</p>
<h4 id="mod取余"><a href="#mod取余" class="headerlink" title="mod取余"></a>mod取余</h4><p>select mod(6,3);</p>
<h2 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h2><h4 id="now-返回当前系统日期-时间"><a href="#now-返回当前系统日期-时间" class="headerlink" title="now 返回当前系统日期+时间"></a>now 返回当前系统日期+时间</h4><h4 id="curdate"><a href="#curdate" class="headerlink" title="curdate"></a>curdate</h4><h4 id="curtime"><a href="#curtime" class="headerlink" title="curtime"></a>curtime</h4><h4 id="year"><a href="#year" class="headerlink" title="year"></a>year</h4><h4 id="str-to-date-‘1998-9-20’-’-Y-d-c’"><a href="#str-to-date-‘1998-9-20’-’-Y-d-c’" class="headerlink" title="str_to_date(‘1998-9-20’,’%Y-%d-%c’)"></a>str_to_date(‘1998-9-20’,’%Y-%d-%c’)</h4><h4 id="selectdatediff-now-’1999-05-22’-可以查询日期的差值"><a href="#selectdatediff-now-’1999-05-22’-可以查询日期的差值" class="headerlink" title="selectdatediff(now(),’1999-05-22’) //可以查询日期的差值"></a>selectdatediff(now(),’1999-05-22’) //可以查询日期的差值</h4><h4 id="timestampdiff-year-day-hour-second-起始值，结束值-计算从出生日期到现在的年数"><a href="#timestampdiff-year-day-hour-second-起始值，结束值-计算从出生日期到现在的年数" class="headerlink" title="timestampdiff(year/day/hour/second,起始值，结束值)计算从出生日期到现在的年数"></a>timestampdiff(year/day/hour/second,起始值，结束值)计算从出生日期到现在的年数</h4><h2 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h2><h4 id="if-条件-trur-false"><a href="#if-条件-trur-false" class="headerlink" title="if(条件,trur,false)"></a>if(条件,trur,false)</h4><h4 id="case：-switch-case"><a href="#case：-switch-case" class="headerlink" title="case： switch case"></a>case： switch case</h4><p>case 表达式<br>when 常量1 then 要显示的值1或语句1；<br>when 常量1 then 要显示的值2或语句2；<br>else 要显示的值<br>end</p>
<h2 id="分组函数-sum-avg-min-max-count"><a href="#分组函数-sum-avg-min-max-count" class="headerlink" title="分组函数 sum avg min max count"></a>分组函数 sum avg min max count</h2><h1 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h1><p>select 查询的函数或值，要分组的字段(可以放多个字段)<br>from表名<br>【where 可以加条件】<br>group by 字段<br>having 根据筛选条件在进行筛选<br>【order by 字段 desc】；<br>分组函数做条件肯定是在having中<br>能用分组前筛，就放在分组前面</p>
<h1 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h1><p>//多表查询，当需要查询的字段涉及到多个表时，就需要连接查询<br>笛卡尔乘积现象：表1 有m行,表2有n行，查询的结果时m*n行<br>select column1,culumn2<br>from table1,table2<br>where table1.id=table2.id<br>and 条件<br>group by 字段</p>
<h1 id="union-字符串-就是将两个查询语句进行组合"><a href="#union-字符串-就是将两个查询语句进行组合" class="headerlink" title="union 字符串 就是将两个查询语句进行组合"></a>union 字符串 就是将两个查询语句进行组合</h1><p>select address,name from student<br>    where address=’qwe’<br>     union     distinct<br>     select address,name from teacher<br>     where address=’qwe’<br>     order by address;</p>
<h1 id="连接："><a href="#连接：" class="headerlink" title="连接："></a>连接：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">inner join :获取两个表中字段字段匹配关系的记录</span><br><span class="line">left join：获取左表左右记录，即使有表没有对应匹配的记录</span><br><span class="line">right join：获取右表所有的记录，即使左表没有对应的记录</span><br><span class="line"></span><br><span class="line">select 列名</span><br><span class="line">from 主表</span><br><span class="line">left outer join 副表</span><br><span class="line">on 条件 一般是相同的id值</span><br><span class="line">where 条件</span><br></pre></td></tr></table></figure>

<h1 id="子查询-内查询，外部的查询语句，称为主查询或外查询"><a href="#子查询-内查询，外部的查询语句，称为主查询或外查询" class="headerlink" title="子查询/内查询，外部的查询语句，称为主查询或外查询"></a>子查询/内查询，外部的查询语句，称为主查询或外查询</h1><p>分类：按子查询出现的位置：<br>1.select后面：仅仅支持标量子查询（结果集只有一行一列）<br>2.from后面：支持表子查询（结果集一般分为多行多列）<br>3.where或having后面：标量子查询（单行）、列子查询（多行）、行子查询（一行多列）、列子查询（一列多行）<br>4.exists后面（相关子查询）：表子查询（多行）<br>//一般使用标量子查询的较多</p>
<h1 id="事务-处理数据量大，复杂"><a href="#事务-处理数据量大，复杂" class="headerlink" title="事务 处理数据量大，复杂"></a>事务 处理数据量大，复杂</h1><p>1.只有Mysql中只有Innodb支持事务<br>2.事务处理的数据库要么全部执行，要么全部不执行<br>3.事务用来管理insert,update,delete语句<br>它满足四个条件：<br>    原子性：一个事务中的所有的操作，要么全部完成，要么全部不完成<br>    一致性：在事务的开始和事务的结束以后，数据库的完整性没有被破坏<br>    隔离性：数据库允许多个并发事务同时对其数据库进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的比一至，事务隔离分为不同级别，包括：未提交,读提交，可重复读和串行化<br>    持久性：事务处理结束后，对数据的修改就是永久的，即使系统故障也不会丢失</p>
<h2 id="事务的实现的两种方式："><a href="#事务的实现的两种方式：" class="headerlink" title="事务的实现的两种方式："></a>事务的实现的两种方式：</h2><pre><code>1.使用begin,rollback,commit来实现,分别是开始，回滚，四五确认
2.使用set来改变mysql的自动提交模式
set autocommit=0禁止自动提交
set autocommit=1开启自动提交</code></pre><h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><p>创建索引<br>create index 索引名称 on 表名(列名(length));</p>
<h3 id="创建唯一索引"><a href="#创建唯一索引" class="headerlink" title="创建唯一索引"></a>创建唯一索引</h3><p>create unique index indexname on student(name(length));</p>
<h1 id="临时表-MySQL-临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql会自动删除表并释放所有空间。"><a href="#临时表-MySQL-临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql会自动删除表并释放所有空间。" class="headerlink" title="临时表 MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql会自动删除表并释放所有空间。"></a>临时表 MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql会自动删除表并释放所有空间。</h1><h1 id="复制表-如果我们需要完全的复制MySQL的数据表，包括表的结构，索引，默认值等。-如果仅仅使用CREATE-TABLE-…-SELECT-命令，是无法实现的。"><a href="#复制表-如果我们需要完全的复制MySQL的数据表，包括表的结构，索引，默认值等。-如果仅仅使用CREATE-TABLE-…-SELECT-命令，是无法实现的。" class="headerlink" title="复制表 如果我们需要完全的复制MySQL的数据表，包括表的结构，索引，默认值等。 如果仅仅使用CREATE TABLE … SELECT 命令，是无法实现的。"></a>复制表 如果我们需要完全的复制MySQL的数据表，包括表的结构，索引，默认值等。 如果仅仅使用CREATE TABLE … SELECT 命令，是无法实现的。</h1><h1 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h1><p>Mysql的序列化是一组数组<br>最简单的方法就是用auto_increment来定义一个列让其实现自增的方法</p>
<h1 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h1><p>所谓的SQL注入就是把SQL 命令插入到web表单递交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令<br>我们需要注意以下几点：<br>1.永远不要新人用户的输入，对用户的输入进行校验，可以通过正则表达式，或者是限制长度，对单引号和双“-”进行转换等<br>2.永远不要使用动态拼装SQL，可以使用参数化的sql或者直接使用存储过程进行数据查询存取<br>3.永远不要使用管理员权限的数据库连接，为每个应用使用单独的权限有限的数据库连接。<br>4.不要把机密信息直接存放，加密或者hash掉密码和敏感的信息。<br>5.应用的异常信息应该给出尽可能少的提示，最好使用自定义的错误信息对原始错误信息进行包装<br>6.sql注入的检测方法一般采取辅助软件或网站平台来检测，软件一般采用sql注入检测工具jsky，网站平台就有亿思网站安全平台检测工具。MDCSOFT SCAN等。采用MDCSOFT-IPS可以有效的防御SQL注入，XSS攻击等。   </p>
<h1 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h1><p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表</span><br><span class="line">[join type join 表2</span><br><span class="line">on 连接条件</span><br><span class="line">where 筛选条件</span><br><span class="line">group by 分组字段</span><br><span class="line">having 分组后的筛选 </span><br><span class="line">order by 排序的字段]</span><br><span class="line">limit offset,size;</span><br><span class="line">offset：要显示条目的起始索引（起始索引从0开始）</span><br><span class="line">size：要显示的条目个数</span><br></pre></td></tr></table></figure>

<h1 id="练习：查询"><a href="#练习：查询" class="headerlink" title="练习：查询"></a>练习：查询</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.</span><br><span class="line">select(</span><br><span class="line">    select salary</span><br><span class="line">        from emplory</span><br><span class="line">        limit 1 offset 1</span><br><span class="line">    ) as secondhighestsalary;</span><br></pre></td></tr></table></figure>

<h1 id="练习：删除"><a href="#练习：删除" class="headerlink" title="练习：删除"></a>练习：删除</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.</span><br><span class="line">    DELETE p1 </span><br><span class="line">    FROM Person p1,Person p2</span><br><span class="line">    WHERE</span><br><span class="line">        p1.Email = p2.Email AND p1.Id &gt; p2.Id</span><br><span class="line">    ;</span><br><span class="line">2.</span><br></pre></td></tr></table></figure>

<h1 id="列转行"><a href="#列转行" class="headerlink" title="列转行"></a>列转行</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT year,</span><br><span class="line">    MAX(CASE month WHEN &apos;1&apos; THEN amount ELSE 0 END ) m1,</span><br><span class="line">    MAX(CASE month WHEN &apos;2&apos; THEN amount ELSE 0 END ) m2,</span><br><span class="line">    MAX(CASE month WHEN &apos;3&apos; THEN amount ELSE 0 END ) m3,</span><br><span class="line">		MAX(CASE month WHEN &apos;4&apos; THEN amount ELSE 0 END ) m4</span><br><span class="line">FROM test</span><br><span class="line">GROUP BY year;</span><br></pre></td></tr></table></figure>


  </article>
  <aside class="table-content" id="site-toc">
  <div class="table-content-title">
    <i class="fa fa-arrow-right fa-lg" id="site-toc-hide-btn"></i>
    <span>目录</span>
  </div>
  <div class="table-content-main">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#存储引擎：Innodb-myisam-memory-blackhole"><span class="toc-text">存储引擎：Innodb myisam,memory,blackhole</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#创建表的完整性约束"><span class="toc-text">创建表的完整性约束</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据类型"><span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#查询版本"><span class="toc-text">查询版本</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#别名"><span class="toc-text">别名</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#distinct-去重"><span class="toc-text">distinct 去重</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#unsigned"><span class="toc-text">unsigned</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#concat"><span class="toc-text">concat</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ifnull-字段名-返回值"><span class="toc-text">ifnull(字段名,返回值)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#模糊查询Like-只是通配符-不能正则"><span class="toc-text">模糊查询Like 只是通配符 不能正则</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#正则表达式-rlike-可以是正则表达式-需要"><span class="toc-text">正则表达式 rlike 可以是正则表达式 需要</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#between-and-包含临界值"><span class="toc-text">between and 包含临界值</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#in"><span class="toc-text">in</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#is-null-is-not-null"><span class="toc-text">is null / is not null</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#lt-gt-安全等于"><span class="toc-text">&lt;=&gt; 安全等于</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#lt-gt-不等于"><span class="toc-text">&lt;&gt;  != 不等于</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#order-by-默认是升序"><span class="toc-text">order by 默认是升序</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#按年薪的高低显示员工的信息和年薪-按别名排序"><span class="toc-text">按年薪的高低显示员工的信息和年薪(按别名排序)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#常见函数"><span class="toc-text">常见函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-字符函数length-获取参数值的字节个数"><span class="toc-text">1.字符函数length //获取参数值的字节个数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-concat拼接函数"><span class="toc-text">2.concat拼接函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-upper-、lower"><span class="toc-text">3.upper 、lower</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-substr、substring-截取字符串"><span class="toc-text">4.substr、substring//截取字符串</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-instr返回字串第一次出现的索引"><span class="toc-text">5.instr返回字串第一次出现的索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-trim"><span class="toc-text">6.trim</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-lpad-用指定的字符实现左填充指定长度"><span class="toc-text">7.lpad 用指定的字符实现左填充指定长度</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-rpad-用指定的字符实现左填充指定长度"><span class="toc-text">8.rpad 用指定的字符实现左填充指定长度</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-replace-替换"><span class="toc-text">9.replace 替换</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数学函数"><span class="toc-text">数学函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#round四舍五入"><span class="toc-text">round四舍五入</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ceil向上取整"><span class="toc-text">ceil向上取整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#floor向下取整"><span class="toc-text">floor向下取整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#truncate-截断"><span class="toc-text">truncate 截断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mod取余"><span class="toc-text">mod取余</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#日期函数"><span class="toc-text">日期函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#now-返回当前系统日期-时间"><span class="toc-text">now 返回当前系统日期+时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#curdate"><span class="toc-text">curdate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#curtime"><span class="toc-text">curtime</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#year"><span class="toc-text">year</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#str-to-date-‘1998-9-20’-’-Y-d-c’"><span class="toc-text">str_to_date(‘1998-9-20’,’%Y-%d-%c’)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#selectdatediff-now-’1999-05-22’-可以查询日期的差值"><span class="toc-text">selectdatediff(now(),’1999-05-22’) //可以查询日期的差值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#timestampdiff-year-day-hour-second-起始值，结束值-计算从出生日期到现在的年数"><span class="toc-text">timestampdiff(year/day/hour/second,起始值，结束值)计算从出生日期到现在的年数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#流程控制函数"><span class="toc-text">流程控制函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#if-条件-trur-false"><span class="toc-text">if(条件,trur,false)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#case：-switch-case"><span class="toc-text">case： switch case</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分组函数-sum-avg-min-max-count"><span class="toc-text">分组函数 sum avg min max count</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#分组查询"><span class="toc-text">分组查询</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#连接查询"><span class="toc-text">连接查询</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#union-字符串-就是将两个查询语句进行组合"><span class="toc-text">union 字符串 就是将两个查询语句进行组合</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#连接："><span class="toc-text">连接：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#子查询-内查询，外部的查询语句，称为主查询或外查询"><span class="toc-text">子查询/内查询，外部的查询语句，称为主查询或外查询</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#事务-处理数据量大，复杂"><span class="toc-text">事务 处理数据量大，复杂</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#事务的实现的两种方式："><span class="toc-text">事务的实现的两种方式：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#索引"><span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建唯一索引"><span class="toc-text">创建唯一索引</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#临时表-MySQL-临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql会自动删除表并释放所有空间。"><span class="toc-text">临时表 MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql会自动删除表并释放所有空间。</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#复制表-如果我们需要完全的复制MySQL的数据表，包括表的结构，索引，默认值等。-如果仅仅使用CREATE-TABLE-…-SELECT-命令，是无法实现的。"><span class="toc-text">复制表 如果我们需要完全的复制MySQL的数据表，包括表的结构，索引，默认值等。 如果仅仅使用CREATE TABLE … SELECT 命令，是无法实现的。</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#序列"><span class="toc-text">序列</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL注入"><span class="toc-text">SQL注入</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#分页查询"><span class="toc-text">分页查询</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#练习：查询"><span class="toc-text">练习：查询</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#练习：删除"><span class="toc-text">练习：删除</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#列转行"><span class="toc-text">列转行</span></a></li></ol>
  </div>
</aside>
  
  
    <div class="passage-tags">
     
      <a href="/blog/tags/Mysql/"><i class="fa fa-tags"></i>Mysql</a>
     
      <a href="/blog/tags/数据库/"><i class="fa fa-tags"></i>数据库</a>
    
    </div>
  
</div>

    </main>
    
      
<div class="site-comment-contanier" data-plateform="leancloud">
  
    <p id="site-comment-info">
      <i class="fa fa-spinner fa-spin"></i> 评论加载中
    </p>
    <div id="site-comment"></div>
  
</div>
    
    <div class="site-footer-wrapper">
  <footer class="site-footer">
    
      
        <div class="site-footer-col">
          <h5 class="site-footer-title">博客推荐</h5>
          
            <span class="site-footer-item">
              <a href="" target="_self"></a>
            </span>
          
            <span class="site-footer-item">
              <a href="http://baidu.com/" target="_blank">百度</a>
            </span>
          
        </div>
      
        <div class="site-footer-col">
          <h5 class="site-footer-title">系列教程</h5>
          
            <span class="site-footer-item">
              <a href="#" target="_self">webpack4系列教程</a>
            </span>
          
            <span class="site-footer-item">
              <a href="#" target="_self">设计模式手册</a>
            </span>
          
        </div>
      
        <div class="site-footer-col">
          <h5 class="site-footer-title">抓到我</h5>
          
            <span class="site-footer-item">
              <a href="" target="_self">掘金</a>
            </span>
          
            <span class="site-footer-item">
              <a href="" target="_self">思否</a>
            </span>
          
        </div>
      
    
    <div class="site-footer-info">
      <i class="fa fa-clock-o"></i> 本站已稳定运行<span id="site-time"></span>
    </div>
    
      <div class="site-footer-info">
        <i class="fa fa-paw"></i> 您是本站第 <span id="site-count"></span> 位访客
      </div>
    
    
      <div class="site-footer-info">
        <i class="fa fa-at"></i> Email: 
      </div>
    
    <div class="site-footer-info">
      <i class="fa fa-copyright"></i> 
      2019 <a href="https://github.com/dongyuanxin/theme-ad/" target="_blank">Theme-AD</a>.
      Created by <a href="https://godbmw.com/" target="_blank">GodBMW</a>.
      All rights reserved.
    </div>
  </footer>
</div>
    <div id="site-layer" style="display:none;">
  <div class="site-layer-content">
    <div class="site-layer-header">
      <span class="site-layer-header-title" id="site-layer-title"></span>
      <i class="fa fa-close" id="site-layer-close"></i>
    </div>
    <div class="site-layer-body" id="site-layer-container">
      <div class="site-layer-input" id="site-layer-search" style="display: none;">
        <div class="site-layer-input-choose">
          <a href="javascript:void(0);" title="Change Search Engine">Google</a>
        </div>
        <input type="text">
        <i class="fa fa-search"></i>
      </div>
      
        <div class="site-layer-reward" id="site-layer-reward" style="display: none;">
          
            <div>
              <img src="/blog/images/wechat.png" alt="WeChat">
              
                <p>WeChat</p>
              
            </div>
          
            <div>
              <img src="/blog/images/alipay.png" alt="AliPay">
              
                <p>AliPay</p>
              
            </div>
          
        </div>
      
      <div id="site-layer-welcome" style="display:none;"></div>
    </div>
  </div>
</div>
    

<div class="bottom-bar">
  <div class="bottom-bar-left">
    <a href="/blog/passages/index/" data-enable="true">
      <i class="fa fa-arrow-left"></i>
    </a>
    <a href="/blog/passages/MybatisPlus/" data-enable="true">
      <i class="fa fa-arrow-right"></i>
    </a>
  </div>
  <div class="bottom-bar-right">
    <a href="javascript:void(0);" data-enable="true" id="site-toc-show-btn">
      <i class="fa fa-bars"></i>
    </a>
    
      <a href="#site-comment" data-enable="true">
        <i class="fa fa-commenting"></i>
      </a>
    
    <a href="javascript:void(0);" id="site-toggle-share-btn">
      <i class="fa fa-share-alt"></i>
    </a>
    
      <a href="javascript:void(0);" id="site-reward">
        <i class="fa fa-thumbs-up"></i>
      </a>
    
    <a href="javascript:void(0);" id="back-top-btn">
      <i class="fa fa-chevron-up"></i>
    </a>
  </div>
</div>
    <div id="share-btn">
  
    <a id="share-btn-twitter" href="javascript:void(0);" target="_blank">
      <i class="fa fa-twitter"></i>
    </a>
  
  
    <a id="share-btn-facebook" href="javascript:void(0);" target="_blank">
      <i class="fa fa-facebook"></i>
    </a>
  
  
    <a id="share-btn-weibo" href="javascript:void(0);" target="_blank">
      <i class="fa fa-weibo"></i>
    </a>
  
  
    <a id="share-btn-qq" href="javascript:void(0);" target="_blank">
      <i class="fa fa-qq"></i>
    </a>
  
  
    <a id="share-btn-wechat" href="javascript:void(0);" target="_blank">
      <i class="fa fa-wechat"></i>
    </a>
  
</div>
    





    
  </body>
</html>